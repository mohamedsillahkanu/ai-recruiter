<!DOCTYPE html>    
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TalentIQ - AI-Powered Recruitment Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #334155;
            --accent: #3b82f6;
            --accent-light: #60a5fa;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --text: #f1f5f9;
            --text-dim: #94a3b8;
            --border: #475569;
        }
        
        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-primary);
            color: var(--text);
            min-height: 100vh;
        }
        
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }
        
        /* Gradient backgrounds */
        .gradient-mesh {
            background: 
                radial-gradient(at 40% 20%, rgba(59, 130, 246, 0.15) 0px, transparent 50%),
                radial-gradient(at 80% 0%, rgba(16, 185, 129, 0.1) 0px, transparent 50%),
                radial-gradient(at 0% 50%, rgba(59, 130, 246, 0.1) 0px, transparent 50%),
                var(--bg-primary);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-primary); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent); }
        
        /* File upload */
        .upload-zone {
            border: 2px dashed var(--border);
            transition: all 0.3s ease;
            background: rgba(30, 41, 59, 0.5);
        }
        .upload-zone:hover, .upload-zone.dragover {
            border-color: var(--accent);
            background: rgba(59, 130, 246, 0.1);
        }
        .upload-zone.has-file {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
        }
        
        /* Input styles */
        .input-field {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text);
            transition: all 0.2s ease;
        }
        .input-field:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        .input-field::placeholder { color: var(--text-dim); }
        
        /* Button styles */
        .btn-primary {
            background: var(--accent);
            color: white;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        .btn-primary:hover:not(:disabled) {
            background: var(--accent-light);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text);
            transition: all 0.2s ease;
        }
        .btn-secondary:hover {
            background: var(--bg-card);
            border-color: var(--accent);
        }
        
        /* Card styles */
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .animate-fadeIn { animation: fadeIn 0.4s ease forwards; }
        .animate-pulse { animation: pulse 1.5s ease-in-out infinite; }
        .animate-spin { animation: spin 1s linear infinite; }
        
        /* Score colors */
        .score-excellent { color: #10b981; }
        .score-good { color: #3b82f6; }
        .score-average { color: #f59e0b; }
        .score-poor { color: #ef4444; }
        
        /* Rank badges */
        .rank-1 { background: linear-gradient(135deg, #fbbf24, #f59e0b); }
        .rank-2 { background: linear-gradient(135deg, #9ca3af, #6b7280); }
        .rank-3 { background: linear-gradient(135deg, #d97706, #b45309); }
        
        /* Progress ring */
        .progress-ring {
            transform: rotate(-90deg);
        }
        .progress-ring circle {
            transition: stroke-dashoffset 0.5s ease;
        }
        
        /* Live indicator */
        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        /* Modal */
        .modal-overlay {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(8px);
        }
        
        /* Table */
        .table-row:hover {
            background: rgba(59, 130, 246, 0.05);
        }
    </style>
</head>
<body class="gradient-mesh">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        // ============================================
        // CONFIGURATION - EDIT THESE VALUES
        // ============================================
        const CONFIG = {
            // Your Anthropic API Key
            API_KEY: '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',
            
            // Job Description (embed your job posting here)
            JOB_DESCRIPTION: `
POSITION: Senior Software Engineer

ABOUT THE ROLE:
We are looking for an experienced Software Engineer to join our growing team. You will be responsible for designing, developing, and maintaining high-quality software solutions.

RESPONSIBILITIES:
- Design and implement scalable software solutions
- Write clean, maintainable, and well-documented code
- Collaborate with cross-functional teams
- Mentor junior developers
- Participate in code reviews
- Troubleshoot and debug applications

REQUIREMENTS:
- Bachelor's degree in Computer Science or related field
- 5+ years of professional software development experience
- Strong proficiency in JavaScript, Python, or Java
- Experience with cloud platforms (AWS, GCP, or Azure)
- Knowledge of databases (SQL and NoSQL)
- Excellent problem-solving skills
- Strong communication skills

PREFERRED QUALIFICATIONS:
- Master's degree in Computer Science
- Experience with microservices architecture
- Knowledge of CI/CD pipelines
- Open source contributions
- Experience leading technical projects

WHAT WE OFFER:
- Competitive salary
- Health insurance
- Remote work options
- Professional development opportunities
            `.trim(),
            
            // Minimum score to qualify (0-100)
            SCORE_THRESHOLD: 60,
            
            // Maximum number of candidates to advance to interview
            MAX_CANDIDATES: 50,
            
            // Reviewer credentials
            REVIEWER_USERNAME: 'reviewer',
            REVIEWER_PASSWORD: 'talent2025',
            
            // Company information for emails
            COMPANY_NAME: 'ICF-SL.',
            COMPANY_EMAIL: 'sillahmohamedkanu@gmail.com',
            INTERVIEW_DETAILS: 'We will contact you with interview scheduling details.'
        };

        // PDF.js worker
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        }

        // ============================================
        // MAIN APP
        // ============================================
        function App() {
            const [view, setView] = useState('applicant'); // 'applicant' or 'reviewer'
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [applications, setApplications] = useState(() => {
                const saved = localStorage.getItem('talentiq_applications');
                return saved ? JSON.parse(saved) : [];
            });
            const [notifications, setNotifications] = useState([]);

            // Save applications to localStorage
            useEffect(() => {
                localStorage.setItem('talentiq_applications', JSON.stringify(applications));
            }, [applications]);

            // Add notification
            const notify = (message, type = 'info') => {
                const id = Date.now();
                setNotifications(prev => [...prev, { id, message, type }]);
                setTimeout(() => setNotifications(prev => prev.filter(n => n.id !== id)), 4000);
            };

            // Add new application with AI analysis
            const addApplication = async (applicantData) => {
                const newApp = {
                    id: Date.now(),
                    ...applicantData,
                    submittedAt: new Date().toISOString(),
                    status: 'analyzing',
                    analysis: null,
                    score: null
                };
                
                setApplications(prev => [newApp, ...prev]);
                notify('Application submitted! AI analysis in progress...', 'success');

                // Start AI analysis
                try {
                    const analysis = await analyzeWithAI(applicantData);
                    setApplications(prev => prev.map(app => 
                        app.id === newApp.id 
                            ? { 
                                ...app, 
                                status: analysis.overallScore >= CONFIG.SCORE_THRESHOLD ? 'qualified' : 'not_qualified',
                                analysis,
                                score: analysis.overallScore
                            }
                            : app
                    ));
                } catch (error) {
                    console.error('Analysis error:', error);
                    setApplications(prev => prev.map(app => 
                        app.id === newApp.id 
                            ? { ...app, status: 'error', analysis: null, score: 0 }
                            : app
                    ));
                    notify('Analysis failed. Please check API key configuration.', 'error');
                }
            };

            // AI Analysis
            const analyzeWithAI = async (applicant) => {
                const prompt = `You are an expert HR recruiter. Analyze this job application and provide a detailed evaluation.

JOB DESCRIPTION:
${CONFIG.JOB_DESCRIPTION}

APPLICANT:
Name: ${applicant.name}
Email: ${applicant.email}
Phone: ${applicant.phone || 'Not provided'}

CV/RESUME:
${applicant.cvText || 'No CV content available'}

COVER LETTER:
${applicant.coverLetterText || 'No cover letter provided'}

Provide your analysis as a JSON object with these exact fields:
{
    "overallScore": <number 0-100>,
    "skillsMatch": <number 0-100>,
    "experienceMatch": <number 0-100>,
    "educationMatch": <number 0-100>,
    "culturalFit": <number 0-100>,
    "strengths": ["strength1", "strength2", "strength3"],
    "weaknesses": ["weakness1", "weakness2"],
    "redFlags": ["flag1"] or [],
    "recommendation": "Brief hiring recommendation",
    "interviewQuestions": ["question1", "question2", "question3"],
    "summary": "2-3 sentence summary of the candidate"
}

RESPOND ONLY WITH THE JSON OBJECT. NO OTHER TEXT.`;

                const response = await fetch("https://api.anthropic.com/v1/messages", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "x-api-key": CONFIG.API_KEY,
                        "anthropic-version": "2023-06-01",
                        "anthropic-dangerous-direct-browser-access": "true"
                    },
                    body: JSON.stringify({
                        model: "claude-sonnet-4-20250514",
                        max_tokens: 1500,
                        messages: [{ role: "user", content: prompt }]
                    })
                });

                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }

                const data = await response.json();
                let text = data.content[0].text;
                text = text.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
                return JSON.parse(text);
            };

            // Clear all data (for reviewer)
            const clearAllData = () => {
                if (confirm('Are you sure you want to clear all applications? This cannot be undone.')) {
                    setApplications([]);
                    localStorage.removeItem('talentiq_applications');
                    notify('All applications cleared', 'info');
                }
            };

            return (
                <div className="min-h-screen">
                    {/* View Switcher */}
                    <div className="fixed top-4 right-4 z-50 flex gap-2">
                        <button
                            onClick={() => setView('applicant')}
                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${
                                view === 'applicant' 
                                    ? 'bg-[var(--accent)] text-white' 
                                    : 'btn-secondary'
                            }`}
                        >
                            üìù Apply
                        </button>
                        <button
                            onClick={() => setView('reviewer')}
                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${
                                view === 'reviewer' 
                                    ? 'bg-[var(--accent)] text-white' 
                                    : 'btn-secondary'
                            }`}
                        >
                            üëî Reviewer
                        </button>
                    </div>

                    {view === 'applicant' ? (
                        <ApplicantPortal onSubmit={addApplication} notify={notify} />
                    ) : (
                        isLoggedIn ? (
                            <ReviewerDashboard 
                                applications={applications}
                                onLogout={() => setIsLoggedIn(false)}
                                onClearData={clearAllData}
                                notify={notify}
                            />
                        ) : (
                            <ReviewerLogin onLogin={() => setIsLoggedIn(true)} notify={notify} />
                        )
                    )}

                    {/* Notifications */}
                    <div className="fixed bottom-4 right-4 z-50 space-y-2">
                        {notifications.map(n => (
                            <div 
                                key={n.id}
                                className={`animate-fadeIn card px-4 py-3 shadow-lg border-l-4 ${
                                    n.type === 'success' ? 'border-l-[var(--success)]' :
                                    n.type === 'error' ? 'border-l-[var(--danger)]' :
                                    'border-l-[var(--accent)]'
                                }`}
                            >
                                <p className="text-sm">{n.message}</p>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // ============================================
        // APPLICANT PORTAL
        // ============================================
        function ApplicantPortal({ onSubmit, notify }) {
            const [name, setName] = useState('');
            const [email, setEmail] = useState('');
            const [phone, setPhone] = useState('');
            const [cvFile, setCvFile] = useState(null);
            const [cvText, setCvText] = useState('');
            const [coverLetterFile, setCoverLetterFile] = useState(null);
            const [coverLetterText, setCoverLetterText] = useState('');
            const [isProcessing, setIsProcessing] = useState(false);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [submitted, setSubmitted] = useState(false);

            // Extract text from PDF
            const extractPDF = async (file) => {
                try {
                    const arrayBuffer = await file.arrayBuffer();
                    const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                    let text = '';
                    for (let i = 1; i <= pdf.numPages; i++) {
                        const page = await pdf.getPage(i);
                        const content = await page.getTextContent();
                        text += content.items.map(item => item.str).join(' ') + '\n';
                    }
                    return text.trim();
                } catch (e) {
                    console.error('PDF error:', e);
                    return '';
                }
            };

            // Extract text from DOCX
            const extractDocx = async (file) => {
                try {
                    const arrayBuffer = await file.arrayBuffer();
                    const result = await mammoth.extractRawText({ arrayBuffer });
                    return result.value.trim();
                } catch (e) {
                    console.error('DOCX error:', e);
                    return '';
                }
            };

            // Handle file
            const handleFile = async (file, type) => {
                if (!file) return;
                setIsProcessing(true);
                
                const ext = file.name.split('.').pop().toLowerCase();
                let text = '';
                
                if (ext === 'pdf') text = await extractPDF(file);
                else if (ext === 'docx' || ext === 'doc') text = await extractDocx(file);
                else if (ext === 'txt') text = await file.text();
                
                if (type === 'cv') {
                    setCvFile(file);
                    setCvText(text);
                } else {
                    setCoverLetterFile(file);
                    setCoverLetterText(text);
                }
                
                setIsProcessing(false);
                notify(`${type === 'cv' ? 'CV' : 'Cover letter'} uploaded successfully`, 'success');
            };

            // Submit
            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!name || !email || !cvFile) {
                    notify('Please fill in all required fields', 'error');
                    return;
                }
                
                setIsSubmitting(true);
                await onSubmit({ name, email, phone, cvText, coverLetterText, cvFileName: cvFile.name, coverLetterFileName: coverLetterFile?.name });
                setIsSubmitting(false);
                setSubmitted(true);
            };

            if (submitted) {
                return (
                    <div className="min-h-screen flex items-center justify-center p-6">
                        <div className="card p-8 max-w-md w-full text-center animate-fadeIn">
                            <div className="text-6xl mb-4">‚úÖ</div>
                            <h2 className="text-2xl font-bold mb-2">Application Submitted!</h2>
                            <p className="text-[var(--text-dim)] mb-6">
                                Thank you for applying, {name}. Our AI is analyzing your application and you will receive an email with the results.
                            </p>
                            <button 
                                onClick={() => {
                                    setSubmitted(false);
                                    setName('');
                                    setEmail('');
                                    setPhone('');
                                    setCvFile(null);
                                    setCvText('');
                                    setCoverLetterFile(null);
                                    setCoverLetterText('');
                                }}
                                className="btn-secondary px-6 py-2 rounded-lg"
                            >
                                Submit Another Application
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen py-12 px-6">
                    <div className="max-w-2xl mx-auto">
                        {/* Header */}
                        <div className="text-center mb-10 animate-fadeIn">
                            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[var(--bg-secondary)] border border-[var(--border)] mb-4">
                                <span className="live-dot"></span>
                                <span className="text-sm text-[var(--text-dim)]">Now Accepting Applications</span>
                            </div>
                            <h1 className="text-4xl font-bold mb-3">Join Our Team</h1>
                            <p className="text-[var(--text-dim)] text-lg">{CONFIG.COMPANY_NAME}</p>
                        </div>

                        {/* Job Description Card */}
                        <div className="card p-6 mb-8 animate-fadeIn" style={{ animationDelay: '0.1s' }}>
                            <h2 className="text-lg font-semibold mb-4 flex items-center gap-2">
                                <span>üìã</span> Job Description
                            </h2>
                            <div className="bg-[var(--bg-primary)] rounded-lg p-4 max-h-64 overflow-y-auto">
                                <pre className="whitespace-pre-wrap text-sm text-[var(--text-dim)] font-sans">
                                    {CONFIG.JOB_DESCRIPTION}
                                </pre>
                            </div>
                        </div>

                        {/* Application Form */}
                        <form onSubmit={handleSubmit} className="card p-6 animate-fadeIn" style={{ animationDelay: '0.2s' }}>
                            <h2 className="text-lg font-semibold mb-6 flex items-center gap-2">
                                <span>üìù</span> Your Application
                            </h2>

                            <div className="space-y-5">
                                {/* Name */}
                                <div>
                                    <label className="block text-sm font-medium mb-2">
                                        Full Name <span className="text-[var(--danger)]">*</span>
                                    </label>
                                    <input
                                        type="text"
                                        value={name}
                                        onChange={(e) => setName(e.target.value)}
                                        placeholder="John Doe"
                                        className="input-field w-full px-4 py-3 rounded-lg"
                                        required
                                    />
                                </div>

                                {/* Email */}
                                <div>
                                    <label className="block text-sm font-medium mb-2">
                                        Email Address <span className="text-[var(--danger)]">*</span>
                                    </label>
                                    <input
                                        type="email"
                                        value={email}
                                        onChange={(e) => setEmail(e.target.value)}
                                        placeholder="john@example.com"
                                        className="input-field w-full px-4 py-3 rounded-lg"
                                        required
                                    />
                                </div>

                                {/* Phone */}
                                <div>
                                    <label className="block text-sm font-medium mb-2">
                                        Phone Number
                                    </label>
                                    <input
                                        type="tel"
                                        value={phone}
                                        onChange={(e) => setPhone(e.target.value)}
                                        placeholder="+1 (555) 123-4567"
                                        className="input-field w-full px-4 py-3 rounded-lg"
                                    />
                                </div>

                                {/* CV Upload */}
                                <div>
                                    <label className="block text-sm font-medium mb-2">
                                        CV / Resume <span className="text-[var(--danger)]">*</span>
                                    </label>
                                    <FileUpload
                                        file={cvFile}
                                        onUpload={(f) => handleFile(f, 'cv')}
                                        accept=".pdf,.doc,.docx,.txt"
                                        icon="üìÑ"
                                        label="Upload your CV"
                                    />
                                </div>

                                {/* Cover Letter Upload */}
                                <div>
                                    <label className="block text-sm font-medium mb-2">
                                        Cover Letter <span className="text-[var(--text-dim)]">(Optional)</span>
                                    </label>
                                    <FileUpload
                                        file={coverLetterFile}
                                        onUpload={(f) => handleFile(f, 'cover')}
                                        accept=".pdf,.doc,.docx,.txt"
                                        icon="‚úâÔ∏è"
                                        label="Upload your cover letter"
                                    />
                                </div>

                                {isProcessing && (
                                    <div className="flex items-center gap-2 text-[var(--accent)]">
                                        <div className="w-4 h-4 border-2 border-[var(--accent)] border-t-transparent rounded-full animate-spin"></div>
                                        <span className="text-sm">Processing document...</span>
                                    </div>
                                )}

                                {/* Submit */}
                                <button
                                    type="submit"
                                    disabled={isSubmitting || isProcessing || !name || !email || !cvFile}
                                    className="btn-primary w-full py-4 rounded-lg text-lg flex items-center justify-center gap-2"
                                >
                                    {isSubmitting ? (
                                        <>
                                            <div className="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                                            Submitting...
                                        </>
                                    ) : (
                                        <>
                                            üöÄ Submit Application
                                        </>
                                    )}
                                </button>
                            </div>
                        </form>

                        {/* Footer */}
                        <p className="text-center text-sm text-[var(--text-dim)] mt-6">
                            Your application will be analyzed by our AI system. <br/>
                            You will receive feedback via email.
                        </p>
                    </div>
                </div>
            );
        }

        // ============================================
        // FILE UPLOAD COMPONENT
        // ============================================
        function FileUpload({ file, onUpload, accept, icon, label }) {
            const [isDragOver, setIsDragOver] = useState(false);
            const inputRef = useRef(null);

            const handleDrop = (e) => {
                e.preventDefault();
                setIsDragOver(false);
                if (e.dataTransfer.files[0]) onUpload(e.dataTransfer.files[0]);
            };

            return (
                <div
                    className={`upload-zone rounded-lg p-6 text-center cursor-pointer ${isDragOver ? 'dragover' : ''} ${file ? 'has-file' : ''}`}
                    onDragOver={(e) => { e.preventDefault(); setIsDragOver(true); }}
                    onDragLeave={() => setIsDragOver(false)}
                    onDrop={handleDrop}
                    onClick={() => inputRef.current?.click()}
                >
                    <input
                        ref={inputRef}
                        type="file"
                        accept={accept}
                        onChange={(e) => onUpload(e.target.files[0])}
                        className="hidden"
                    />
                    {file ? (
                        <div className="flex items-center justify-center gap-3">
                            <span className="text-2xl">{icon}</span>
                            <div className="text-left">
                                <p className="font-medium text-[var(--success)]">{file.name}</p>
                                <p className="text-xs text-[var(--text-dim)]">{(file.size / 1024).toFixed(1)} KB</p>
                            </div>
                            <span className="text-[var(--success)]">‚úì</span>
                        </div>
                    ) : (
                        <>
                            <div className="text-3xl mb-2">{icon}</div>
                            <p className="text-sm text-[var(--text-dim)]">{label}</p>
                            <p className="text-xs text-[var(--text-dim)] mt-1">PDF, DOC, DOCX, or TXT</p>
                        </>
                    )}
                </div>
            );
        }

        // ============================================
        // REVIEWER LOGIN
        // ============================================
        function ReviewerLogin({ onLogin, notify }) {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                if (username === CONFIG.REVIEWER_USERNAME && password === CONFIG.REVIEWER_PASSWORD) {
                    onLogin();
                    notify('Welcome back!', 'success');
                } else {
                    notify('Invalid credentials', 'error');
                }
            };

            return (
                <div className="min-h-screen flex items-center justify-center p-6">
                    <div className="card p-8 max-w-md w-full animate-fadeIn">
                        <div className="text-center mb-8">
                            <div className="w-16 h-16 rounded-full bg-[var(--accent)] flex items-center justify-center mx-auto mb-4">
                                <span className="text-3xl">üëî</span>
                            </div>
                            <h1 className="text-2xl font-bold">Reviewer Login</h1>
                            <p className="text-[var(--text-dim)] text-sm mt-1">Access the recruitment dashboard</p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium mb-2">Username</label>
                                <input
                                    type="text"
                                    value={username}
                                    onChange={(e) => setUsername(e.target.value)}
                                    className="input-field w-full px-4 py-3 rounded-lg"
                                    placeholder="Enter username"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium mb-2">Password</label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="input-field w-full px-4 py-3 rounded-lg"
                                    placeholder="Enter password"
                                />
                            </div>
                            <button type="submit" className="btn-primary w-full py-3 rounded-lg">
                                Login
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        // ============================================
        // REVIEWER DASHBOARD
        // ============================================
        function ReviewerDashboard({ applications, onLogout, onClearData, notify }) {
            const [selectedApp, setSelectedApp] = useState(null);
            const [filter, setFilter] = useState('all');
            const [sortBy, setSortBy] = useState('score');

            // Sort and rank applications
            const sortedApps = [...applications]
                .filter(app => {
                    if (filter === 'qualified') return app.status === 'qualified';
                    if (filter === 'not_qualified') return app.status === 'not_qualified';
                    if (filter === 'analyzing') return app.status === 'analyzing';
                    return true;
                })
                .sort((a, b) => {
                    if (sortBy === 'score') return (b.score || 0) - (a.score || 0);
                    if (sortBy === 'date') return new Date(b.submittedAt) - new Date(a.submittedAt);
                    if (sortBy === 'name') return a.name.localeCompare(b.name);
                    return 0;
                });

            // Assign ranks
            const rankedApps = sortedApps.map((app, idx) => ({
                ...app,
                rank: app.score ? idx + 1 : null
            }));

            // Stats
            const stats = {
                total: applications.length,
                qualified: applications.filter(a => a.status === 'qualified').length,
                notQualified: applications.filter(a => a.status === 'not_qualified').length,
                analyzing: applications.filter(a => a.status === 'analyzing').length,
                avgScore: applications.filter(a => a.score).reduce((sum, a) => sum + a.score, 0) / 
                         (applications.filter(a => a.score).length || 1)
            };

            // Export to CSV
            const exportCSV = () => {
                const headers = ['Rank', 'Name', 'Email', 'Phone', 'Score', 'Status', 'Skills Match', 'Experience Match', 'Submitted'];
                const rows = rankedApps.map(app => [
                    app.rank || '-',
                    app.name,
                    app.email,
                    app.phone || '-',
                    app.score || '-',
                    app.status,
                    app.analysis?.skillsMatch || '-',
                    app.analysis?.experienceMatch || '-',
                    new Date(app.submittedAt).toLocaleString()
                ]);
                
                const csv = [headers, ...rows].map(row => row.join(',')).join('\n');
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `applications_${new Date().toISOString().split('T')[0]}.csv`;
                a.click();
                notify('CSV exported successfully', 'success');
            };

            return (
                <div className="min-h-screen p-6">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="flex items-center justify-between mb-8">
                            <div>
                                <h1 className="text-3xl font-bold">Recruitment Dashboard</h1>
                                <p className="text-[var(--text-dim)]">{CONFIG.COMPANY_NAME}</p>
                            </div>
                            <div className="flex items-center gap-3">
                                <div className="flex items-center gap-2 px-3 py-2 rounded-lg bg-[var(--bg-secondary)]">
                                    <span className="live-dot"></span>
                                    <span className="text-sm">Live Updates</span>
                                </div>
                                <button onClick={exportCSV} className="btn-secondary px-4 py-2 rounded-lg text-sm">
                                    üì• Export CSV
                                </button>
                                <button onClick={onClearData} className="btn-secondary px-4 py-2 rounded-lg text-sm text-[var(--danger)]">
                                    üóëÔ∏è Clear Data
                                </button>
                                <button onClick={onLogout} className="btn-secondary px-4 py-2 rounded-lg text-sm">
                                    Logout
                                </button>
                            </div>
                        </div>

                        {/* Stats */}
                        <div className="grid grid-cols-2 md:grid-cols-5 gap-4 mb-8">
                            <StatCard label="Total Applications" value={stats.total} icon="üìã" />
                            <StatCard label="Qualified" value={stats.qualified} icon="‚úÖ" color="success" />
                            <StatCard label="Not Qualified" value={stats.notQualified} icon="‚ùå" color="danger" />
                            <StatCard label="Analyzing" value={stats.analyzing} icon="‚è≥" color="warning" />
                            <StatCard label="Avg Score" value={`${Math.round(stats.avgScore)}%`} icon="üìä" />
                        </div>

                        {/* Filters */}
                        <div className="card p-4 mb-6 flex flex-wrap items-center gap-4">
                            <div className="flex items-center gap-2">
                                <span className="text-sm text-[var(--text-dim)]">Filter:</span>
                                <select 
                                    value={filter} 
                                    onChange={(e) => setFilter(e.target.value)}
                                    className="input-field px-3 py-2 rounded-lg text-sm"
                                >
                                    <option value="all">All Applications</option>
                                    <option value="qualified">Qualified Only</option>
                                    <option value="not_qualified">Not Qualified</option>
                                    <option value="analyzing">Analyzing</option>
                                </select>
                            </div>
                            <div className="flex items-center gap-2">
                                <span className="text-sm text-[var(--text-dim)]">Sort by:</span>
                                <select 
                                    value={sortBy} 
                                    onChange={(e) => setSortBy(e.target.value)}
                                    className="input-field px-3 py-2 rounded-lg text-sm"
                                >
                                    <option value="score">Score (High to Low)</option>
                                    <option value="date">Date (Newest)</option>
                                    <option value="name">Name (A-Z)</option>
                                </select>
                            </div>
                            <div className="ml-auto text-sm text-[var(--text-dim)]">
                                Showing {rankedApps.length} of {applications.length} applications
                            </div>
                        </div>

                        {/* Leaderboard */}
                        <div className="card overflow-hidden">
                            <div className="p-4 border-b border-[var(--border)]">
                                <h2 className="text-lg font-semibold flex items-center gap-2">
                                    üèÜ Candidate Leaderboard
                                </h2>
                            </div>
                            
                            {rankedApps.length === 0 ? (
                                <div className="p-12 text-center">
                                    <div className="text-5xl mb-4">üì≠</div>
                                    <p className="text-[var(--text-dim)]">No applications yet</p>
                                </div>
                            ) : (
                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead>
                                            <tr className="text-left text-sm text-[var(--text-dim)] border-b border-[var(--border)]">
                                                <th className="p-4 w-16">Rank</th>
                                                <th className="p-4">Candidate</th>
                                                <th className="p-4">Score</th>
                                                <th className="p-4">Skills</th>
                                                <th className="p-4">Experience</th>
                                                <th className="p-4">Status</th>
                                                <th className="p-4">Submitted</th>
                                                <th className="p-4">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {rankedApps.map((app, idx) => (
                                                <tr 
                                                    key={app.id} 
                                                    className="table-row border-b border-[var(--border)] animate-fadeIn"
                                                    style={{ animationDelay: `${idx * 0.03}s` }}
                                                >
                                                    <td className="p-4">
                                                        {app.rank && app.rank <= 3 ? (
                                                            <span className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white rank-${app.rank}`}>
                                                                {app.rank}
                                                            </span>
                                                        ) : (
                                                            <span className="text-[var(--text-dim)]">{app.rank || '-'}</span>
                                                        )}
                                                    </td>
                                                    <td className="p-4">
                                                        <div>
                                                            <p className="font-medium">{app.name}</p>
                                                            <p className="text-sm text-[var(--text-dim)] font-mono">{app.email}</p>
                                                        </div>
                                                    </td>
                                                    <td className="p-4">
                                                        {app.status === 'analyzing' ? (
                                                            <div className="flex items-center gap-2">
                                                                <div className="w-4 h-4 border-2 border-[var(--accent)] border-t-transparent rounded-full animate-spin"></div>
                                                                <span className="text-sm text-[var(--text-dim)]">Analyzing...</span>
                                                            </div>
                                                        ) : app.score !== null ? (
                                                            <ScoreBadge score={app.score} />
                                                        ) : (
                                                            <span className="text-[var(--text-dim)]">-</span>
                                                        )}
                                                    </td>
                                                    <td className="p-4">
                                                        {app.analysis?.skillsMatch ? (
                                                            <span className="text-sm">{app.analysis.skillsMatch}%</span>
                                                        ) : '-'}
                                                    </td>
                                                    <td className="p-4">
                                                        {app.analysis?.experienceMatch ? (
                                                            <span className="text-sm">{app.analysis.experienceMatch}%</span>
                                                        ) : '-'}
                                                    </td>
                                                    <td className="p-4">
                                                        <StatusBadge status={app.status} />
                                                    </td>
                                                    <td className="p-4 text-sm text-[var(--text-dim)]">
                                                        {new Date(app.submittedAt).toLocaleString()}
                                                    </td>
                                                    <td className="p-4">
                                                        <button
                                                            onClick={() => setSelectedApp(app)}
                                                            className="text-[var(--accent)] hover:underline text-sm"
                                                        >
                                                            View Report
                                                        </button>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* Detail Modal */}
                    {selectedApp && (
                        <ApplicantDetailModal 
                            applicant={selectedApp} 
                            onClose={() => setSelectedApp(null)}
                        />
                    )}
                </div>
            );
        }

        // ============================================
        // STAT CARD
        // ============================================
        function StatCard({ label, value, icon, color }) {
            const colorClass = color === 'success' ? 'text-[var(--success)]' : 
                              color === 'danger' ? 'text-[var(--danger)]' : 
                              color === 'warning' ? 'text-[var(--warning)]' : '';
            return (
                <div className="card p-4">
                    <div className="flex items-center gap-3">
                        <span className="text-2xl">{icon}</span>
                        <div>
                            <p className={`text-2xl font-bold ${colorClass}`}>{value}</p>
                            <p className="text-xs text-[var(--text-dim)]">{label}</p>
                        </div>
                    </div>
                </div>
            );
        }

        // ============================================
        // SCORE BADGE
        // ============================================
        function ScoreBadge({ score }) {
            const getColor = (s) => {
                if (s >= 80) return 'score-excellent';
                if (s >= 60) return 'score-good';
                if (s >= 40) return 'score-average';
                return 'score-poor';
            };
            return (
                <span className={`text-xl font-bold font-mono ${getColor(score)}`}>
                    {score}%
                </span>
            );
        }

        // ============================================
        // STATUS BADGE
        // ============================================
        function StatusBadge({ status }) {
            const config = {
                qualified: { label: 'Qualified', bg: 'bg-[rgba(16,185,129,0.2)]', text: 'text-[var(--success)]' },
                not_qualified: { label: 'Not Qualified', bg: 'bg-[rgba(239,68,68,0.2)]', text: 'text-[var(--danger)]' },
                analyzing: { label: 'Analyzing', bg: 'bg-[rgba(245,158,11,0.2)]', text: 'text-[var(--warning)]' },
                error: { label: 'Error', bg: 'bg-[rgba(239,68,68,0.2)]', text: 'text-[var(--danger)]' }
            };
            const { label, bg, text } = config[status] || config.error;
            return (
                <span className={`px-2 py-1 rounded text-xs font-medium ${bg} ${text}`}>
                    {label}
                </span>
            );
        }

        // ============================================
        // APPLICANT DETAIL MODAL
        // ============================================
        function ApplicantDetailModal({ applicant, onClose }) {
            const analysis = applicant.analysis || {};
            
            return (
                <div className="fixed inset-0 modal-overlay flex items-center justify-center z-50 p-4" onClick={onClose}>
                    <div 
                        className="card max-w-3xl w-full max-h-[90vh] overflow-y-auto animate-fadeIn"
                        onClick={(e) => e.stopPropagation()}
                    >
                        {/* Header */}
                        <div className="sticky top-0 bg-[var(--bg-secondary)] border-b border-[var(--border)] p-6 flex items-center justify-between">
                            <div className="flex items-center gap-4">
                                <div className="w-14 h-14 rounded-full bg-[var(--accent)] flex items-center justify-center text-xl font-bold">
                                    {applicant.name.charAt(0)}
                                </div>
                                <div>
                                    <h2 className="text-xl font-bold">{applicant.name}</h2>
                                    <p className="text-sm text-[var(--text-dim)] font-mono">{applicant.email}</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-4">
                                {applicant.score !== null && <ScoreBadge score={applicant.score} />}
                                <button onClick={onClose} className="text-2xl text-[var(--text-dim)] hover:text-white">‚úï</button>
                            </div>
                        </div>

                        {/* Content */}
                        <div className="p-6 space-y-6">
                            {applicant.status === 'analyzing' ? (
                                <div className="text-center py-12">
                                    <div className="w-12 h-12 border-4 border-[var(--accent)] border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                                    <p className="text-[var(--text-dim)]">AI Analysis in progress...</p>
                                </div>
                            ) : applicant.status === 'error' ? (
                                <div className="text-center py-12">
                                    <div className="text-5xl mb-4">‚ö†Ô∏è</div>
                                    <p className="text-[var(--danger)]">Analysis failed. Please check API configuration.</p>
                                </div>
                            ) : (
                                <>
                                    {/* Score Breakdown */}
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <ScoreCard label="Skills Match" score={analysis.skillsMatch} />
                                        <ScoreCard label="Experience" score={analysis.experienceMatch} />
                                        <ScoreCard label="Education" score={analysis.educationMatch} />
                                        <ScoreCard label="Cultural Fit" score={analysis.culturalFit} />
                                    </div>

                                    {/* Summary */}
                                    {analysis.summary && (
                                        <div className="bg-[var(--bg-primary)] rounded-lg p-4">
                                            <h3 className="font-semibold mb-2">üìù Summary</h3>
                                            <p className="text-[var(--text-dim)]">{analysis.summary}</p>
                                        </div>
                                    )}

                                    {/* Strengths */}
                                    {analysis.strengths?.length > 0 && (
                                        <div>
                                            <h3 className="font-semibold mb-3 text-[var(--success)]">üí™ Strengths</h3>
                                            <ul className="space-y-2">
                                                {analysis.strengths.map((s, i) => (
                                                    <li key={i} className="flex items-start gap-2">
                                                        <span className="text-[var(--success)]">‚úì</span>
                                                        <span>{s}</span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                    )}

                                    {/* Weaknesses */}
                                    {analysis.weaknesses?.length > 0 && (
                                        <div>
                                            <h3 className="font-semibold mb-3 text-[var(--warning)]">‚ö†Ô∏è Areas for Improvement</h3>
                                            <ul className="space-y-2">
                                                {analysis.weaknesses.map((w, i) => (
                                                    <li key={i} className="flex items-start gap-2">
                                                        <span className="text-[var(--warning)]">‚Ä¢</span>
                                                        <span>{w}</span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                    )}

                                    {/* Red Flags */}
                                    {analysis.redFlags?.length > 0 && (
                                        <div>
                                            <h3 className="font-semibold mb-3 text-[var(--danger)]">üö© Red Flags</h3>
                                            <ul className="space-y-2">
                                                {analysis.redFlags.map((r, i) => (
                                                    <li key={i} className="flex items-start gap-2">
                                                        <span className="text-[var(--danger)]">!</span>
                                                        <span>{r}</span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                    )}

                                    {/* Recommendation */}
                                    {analysis.recommendation && (
                                        <div className="bg-[var(--bg-primary)] rounded-lg p-4">
                                            <h3 className="font-semibold mb-2">üí° Recommendation</h3>
                                            <p className="text-[var(--text-dim)]">{analysis.recommendation}</p>
                                        </div>
                                    )}

                                    {/* Interview Questions */}
                                    {analysis.interviewQuestions?.length > 0 && (
                                        <div>
                                            <h3 className="font-semibold mb-3">‚ùì Suggested Interview Questions</h3>
                                            <ol className="space-y-2 list-decimal list-inside">
                                                {analysis.interviewQuestions.map((q, i) => (
                                                    <li key={i} className="text-[var(--text-dim)]">{q}</li>
                                                ))}
                                            </ol>
                                        </div>
                                    )}

                                    {/* Status */}
                                    <div className={`inline-flex items-center gap-2 px-4 py-2 rounded-full ${
                                        applicant.status === 'qualified' 
                                            ? 'bg-[rgba(16,185,129,0.2)] text-[var(--success)]'
                                            : 'bg-[rgba(239,68,68,0.2)] text-[var(--danger)]'
                                    }`}>
                                        {applicant.status === 'qualified' ? '‚úÖ Qualified for Interview' : '‚ùå Does Not Meet Requirements'}
                                    </div>
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        // ============================================
        // SCORE CARD
        // ============================================
        function ScoreCard({ label, score }) {
            const getColor = (s) => {
                if (s >= 80) return 'var(--success)';
                if (s >= 60) return 'var(--accent)';
                if (s >= 40) return 'var(--warning)';
                return 'var(--danger)';
            };
            
            return (
                <div className="bg-[var(--bg-primary)] rounded-lg p-4 text-center">
                    <div className="text-2xl font-bold" style={{ color: getColor(score || 0) }}>
                        {score || 0}%
                    </div>
                    <div className="text-xs text-[var(--text-dim)] mt-1">{label}</div>
                </div>
            );
        }

        // Render
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
